

<!DOCTYPE html>
<html lang="ko-kr">
  <head>
    
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KZXLS88');</script>
    

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="Hugo 0.55.3" />
    <link rel="shortcut icon" href="/images/favicon.ico">
    <link href="http://integerous.github.io/index.xml" rel="alternate" type="application/rss+xml" title="ryan-han.com âŒ ğŸ¡’ jobless.blog â­•ï¸" />
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:700i" rel="stylesheet">
    
    <script src="https://apis.google.com/js/platform.js" async defer>{lang: 'ja'}</script>
    
    <link rel="stylesheet" href="https://yandex.st/highlightjs/8.0/styles/default.min.css">
    <script src="https://yandex.st/highlightjs/8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    
    <link rel="stylesheet" type="text/css" href="/css/single.css">
    <title>Try-with-resourcesë¥¼ ì´ìš©í•œ ìì›í•´ì œ ì²˜ë¦¬ | ryan-han.com âŒ ğŸ¡’ jobless.blog â­•ï¸</title>
  </head>
  <body>
    
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KZXLS88"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  
  
    <div id="wrap">
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-126908369-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

      <header class="site-header">
        <div class="site-header-left">
          <a class="site-header-title" href="http://integerous.github.io/">ryan-han.com âŒ ğŸ¡’ jobless.blog â­•ï¸</a>
        </div>
      </header>
      <div class="container">
        <div id="main">




<div class="article">
  <header>
    <div class="article-header">
      <h1>Try-with-resourcesë¥¼ ì´ìš©í•œ ìì›í•´ì œ ì²˜ë¦¬</h1>
      <div class="article-meta">
        <span class="posttime">2019/05/30</span>


        
<div class="tags">
  <ul>
    
    <li>
        <a href="/tags/java">Java</a>
    </li>
    
  </ul>
</div>


      </div>
    </div>
    
  </header>
  <div class="content">
    <h3> ë¸”ë¡œê·¸ ì˜®ê²¼ìŠµë‹ˆë‹¤!</h3>
    <p> ë¸”ë¡œê·¸ë¥¼ https://jobless.blog ë¡œ ì˜®ê²¼ìŠµë‹ˆë‹¤ :) </p>
    <p> ìƒˆë¡œìš´ ë¸”ë¡œê·¸ëŠ” **[êµ¬ë…](https://www.jobless.blog/#/portal/signup/)**í•  ìˆ˜ ìˆì–´ì„œ, ìƒˆ ê¸€ì´ ì˜¬ë¼ì˜¤ë©´ ì´ë©”ì¼ë¡œ ë°›ì•„ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤ :) </p>
    

<div style="display: flex; justify-content: space-around">
    <div>
        <a href="http://bit.ly/all-in-one-study">
            <img src="/images/memoirs/2020/all-in-one-1.jpg" width="280" style="filter: drop-shadow(0 0.3rem 0.4rem rgba(0, 0, 0, 0.5))" />
        </a> 
    </div> 
    <div>
        <a href="http://bit.ly/all-in-one-job">
            <img src="/images/memoirs/2020/all-in-one-2.jpg" width="280" style="filter: drop-shadow(0 0.3rem 0.4rem rgba(0, 0, 0, 0.5))" />
        </a>  
    </div>
    <div>
        <a href="http://bit.ly/all-in-one-united">
            <img src="/images/memoirs/2020/all-in-one-3.jpg" width="280" style="filter: drop-shadow(0 0.3rem 0.4rem rgba(0, 0, 0, 0.5))" />
        </a>  
    </div>
</div>

<hr />

<p></br></p>

<blockquote>
<p>ì½”ë“œ ë¦¬ë·°ë¥¼ ë°›ë˜ ì¤‘ Try-with-resourcesë¥¼ ì•Œê²Œ ë˜ì–´ ì •ë¦¬</p>
</blockquote>

<p>ì½”ë“œ ë¦¬ë·°ë¥¼ ë°›ê¸° ì „ ì½”ë“œëŠ” ì•„ë˜ì™€ ê°™ì•˜ë‹¤.</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> String <span style="color:#008b45">getHtml</span>(String url) {

    <span style="color:#8b008b;font-weight:bold">try</span>{
        URL targetUrl = <span style="color:#8b008b;font-weight:bold">new</span> URL(url);
        BufferedReader reader = <span style="color:#8b008b;font-weight:bold">new</span> BufferedReader(<span style="color:#8b008b;font-weight:bold">new</span> InputStreamReader(targetUrl.<span style="color:#658b00">openStream</span>()));
        StringBuffer html = <span style="color:#8b008b;font-weight:bold">new</span> StringBuffer();
        String tmp = <span style="color:#cd5555">&#34;&#34;</span>;

        <span style="color:#8b008b;font-weight:bold">while</span> ((tmp = reader.<span style="color:#658b00">readLine</span>()) != <span style="color:#8b008b;font-weight:bold">null</span>) {
            html.<span style="color:#658b00">append</span>(tmp);
        }
        reader.<span style="color:#658b00">close</span>(); <span style="color:#228b22">// ì´ ë¶€ë¶„ ì „ì— ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ BufferedReaderë¥¼ ë‹«ì§€ ëª»í•˜ê³  catchë¬¸ìœ¼ë¡œ ë¹ ì§€ëŠ” ë¬¸ì œ
</span><span style="color:#228b22"></span>        <span style="color:#8b008b;font-weight:bold">return</span> html.<span style="color:#658b00">toString</span>();

    } <span style="color:#8b008b;font-weight:bold">catch</span> (MalformedURLException e) {
        reader.<span style="color:#658b00">close</span>(); <span style="color:#228b22">// ì´ˆê¸°ì—ëŠ” ì¶”ê°€í•˜ì§€ ì•Šì•˜ë˜ ì½”ë“œ
</span><span style="color:#228b22"></span>        e.<span style="color:#658b00">printStackTrace</span>();
        <span style="color:#8b008b;font-weight:bold">throw</span> e;
    } <span style="color:#8b008b;font-weight:bold">catch</span> (IOException e) {
        reader.<span style="color:#658b00">close</span>(); <span style="color:#228b22">// ì´ˆê¸°ì—ëŠ” ì¶”ê°€í•˜ì§€ ì•Šì•˜ë˜ ì½”ë“œ
</span><span style="color:#228b22"></span>        e.<span style="color:#658b00">printStackTrace</span>();
        <span style="color:#8b008b;font-weight:bold">throw</span> e;
    } <span style="color:#8b008b;font-weight:bold">catch</span> (Exception e) {
        reader.<span style="color:#658b00">close</span>(); <span style="color:#228b22">// ì´ˆê¸°ì—ëŠ” ì¶”ê°€í•˜ì§€ ì•Šì•˜ë˜ ì½”ë“œ
</span><span style="color:#228b22"></span>        e.<span style="color:#658b00">printStackTrace</span>();
        <span style="color:#8b008b;font-weight:bold">throw</span> e;
    }</code></pre></div>
<p>í•œêµ­ê±°ë˜ì†Œ APIë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ urlì„ ì…ë ¥ë°›ì•„ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ì˜ htmlì„ Stringìœ¼ë¡œ ë°˜í™˜í•˜ëŠ” ë©”ì†Œë“œë¥¼ ì‘ì„±í–ˆë‹¤.<br />
ì´ <strong><em>ë˜¥ì½”ë“œ</em></strong>ëŠ” ë³´ê¸°ë§Œí•´ë„ ì§€ì €ë¶„í–ˆëŠ”ë°,<br />
ì§€ì €ë¶„í•œ ê²ƒì€ ì°¨ì¹˜í•˜ê³ , <code>reader.close()</code>ì— ë„ë‹¬í•˜ê¸° ì „ì— ì˜ˆì™¸ê°€ ë°œìƒí•  ê²½ìš°ë¥¼ ëŒ€ë¹„í•˜ì§€ ì•Šì€ ì½”ë“œì˜€ë‹¤.</p>

<p>ê·¸ë˜ì„œ ìœ„ì˜ ì½”ë“œì™€ ê°™ì´ <code>reader.close()</code>ë¥¼ ëª¨ë“  catchë¬¸ì— ì¶”ê°€í•˜ê±°ë‚˜,<br />
ì•„ë˜ì˜ ì˜ˆì‹œì™€ ê°™ì´ finallyë¬¸ì„ ë§Œë“¤ì–´ì„œ ì²˜ë¦¬í–ˆì–´ì•¼ í–ˆë‹¤.</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">SomeResource resource = <span style="color:#8b008b;font-weight:bold">null</span>;
<span style="color:#8b008b;font-weight:bold">try</span> {
    resource = getResource();
    use(resource);
} <span style="color:#8b008b;font-weight:bold">catch</span>(...) {
    ...
} <span style="color:#8b008b;font-weight:bold">finally</span> {
    <span style="color:#8b008b;font-weight:bold">if</span> (resource != <span style="color:#8b008b;font-weight:bold">null</span>) {
        <span style="color:#8b008b;font-weight:bold">try</span> { resource.<span style="color:#658b00">close</span>(); } <span style="color:#8b008b;font-weight:bold">catch</span>(...) { <span style="color:#228b22">/* ì•„ë¬´ê²ƒë„ ì•ˆ í•¨ */</span> }
    }
}

(ì¶œì²˜: ìµœë²”ê· ë‹˜ ë¸”ë¡œê·¸)</code></pre></div>
<p>í•˜ì§€ë§Œ ë‚˜ì˜ <strong><em>ë˜¥ì½”ë“œ</em></strong>ë¥¼ ë³´ì‹  íŒ€ì›ë¶„ê»˜ì„œ JDK7 ë¶€í„° ì¶”ê°€ëœ <code>try-with-resources</code>ë¥¼ ì„¤ëª…í•´ì£¼ì…¨ë‹¤.</p>

<p><br/></p>

<h2 id="ê·¸ë˜ì„œ-try-with-resources-ëŠ”-ë¬´ì—‡">ê·¸ë˜ì„œ <code>Try-with-resources</code> ëŠ” ë¬´ì—‡?</h2>

<p><code>Try-with-resources</code>ëŠ” ì•„ë˜ì˜ ì½”ë“œì™€ ê°™ì´<br />
<strong>tryì— ìì› ê°ì²´ë¥¼ ì „ë‹¬í•˜ë©´, try ì½”ë“œ ë¸”ë¡ì´ ëë‚˜ë©´ ìë™ìœ¼ë¡œ ìì›ì„ ì¢…ë£Œí•´ì£¼ëŠ” ê¸°ëŠ¥</strong>ì´ë‹¤.</p>

<p>ì¦‰, ë”°ë¡œ finally ë¸”ë¡ì´ë‚˜ ëª¨ë“  catch ë¸”ë¡ì— ì¢…ë£Œ ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">try</span> (SomeResource resource = getResource()) {
    use(resource);
} <span style="color:#8b008b;font-weight:bold">catch</span>(...) {
    ...
}</code></pre></div>
<p>ê·¸ëŸ°ë° ì´ ë•Œ, tryì— ì „ë‹¬í•  ìˆ˜ ìˆëŠ” ìì›ì€ <code>AutoCloseable</code> ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ë¡œ í•œì •ëœë‹¤.</p>

<blockquote>
<p><code>AutoCloseable</code>ì€ JDK1.7ë¶€í„° ì¶”ê°€ëœ ì¸í„°í˜ì´ìŠ¤ë‹¤.</p>
</blockquote>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#228b22">/**
</span><span style="color:#228b22"> * @author Josh Bloch
</span><span style="color:#228b22"> * @since 1.7
</span><span style="color:#228b22"> */</span>
<span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">interface</span> <span style="color:#008b45;font-weight:bold">AutoCloseable</span> {
    <span style="color:#00688b;font-weight:bold">void</span> <span style="color:#008b45">close</span>() <span style="color:#8b008b;font-weight:bold">throws</span> Exception;
}</code></pre></div>
<p>ê·¸ë¦¬ê³  ì•„ë˜ì™€ ê°™ì´ <code>try()</code> ì•ˆì— ë³µìˆ˜ì˜ ìì› ê°ì²´ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">try</span>(Something1 s1 = <span style="color:#8b008b;font-weight:bold">new</span> Something1();
    Something2 s2 = <span style="color:#8b008b;font-weight:bold">new</span> Something2()) {

} <span style="color:#8b008b;font-weight:bold">catch</span>(...) {
    ...
}</code></pre></div>
<p>ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œì—ì„œëŠ” <code>BufferedReader</code>ì™€ <code>InputStreamReader</code>í´ë˜ìŠ¤ê°€ ì¶”ìƒí´ë˜ìŠ¤ <code>Reader</code>ë¥¼ ìƒì†ë°›ì•˜ê³ ,<br />
<code>Reader</code>ëŠ” <code>Closeable</code> ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ì•˜ìœ¼ë©°,<br />
<code>Closeable</code> ì¸í„°í˜ì´ìŠ¤ëŠ” <code>AutoCloseable</code>ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ì•˜ë‹¤.</p>

<p>ë•Œë¬¸ì— <code>try-with-resources</code>ë¥¼ í™œìš©í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ ë‚´ê°€ ì‘ì„±í–ˆë˜ ì½”ë“œë¥¼ ê°œì„ í•  ìˆ˜ ìˆì—ˆë‹¤.</p>
<div class="highlight"><pre style="background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#8b008b;font-weight:bold">public</span> <span style="color:#8b008b;font-weight:bold">static</span> String <span style="color:#008b45">getHtml</span>(String url) <span style="color:#8b008b;font-weight:bold">throws</span> IOException {

	URL targetUrl = <span style="color:#8b008b;font-weight:bold">new</span> URL(url);

	<span style="color:#8b008b;font-weight:bold">try</span> (BufferedReader reader = <span style="color:#8b008b;font-weight:bold">new</span> BufferedReader(<span style="color:#8b008b;font-weight:bold">new</span> InputStreamReader(targetUrl.<span style="color:#658b00">openStream</span>()))){
		StringBuffer html = <span style="color:#8b008b;font-weight:bold">new</span> StringBuffer();
		String tmp;

		<span style="color:#8b008b;font-weight:bold">while</span> ((tmp = reader.<span style="color:#658b00">readLine</span>()) != <span style="color:#8b008b;font-weight:bold">null</span>) {
			html.<span style="color:#658b00">append</span>(tmp);
		}
		<span style="color:#8b008b;font-weight:bold">return</span> html.<span style="color:#658b00">toString</span>();
	}
}</code></pre></div>
<p>ì½”ë“œë¦¬ë·°ë¥¼ ë°›ìœ¼ë©° ë°°ìš´ ê²ƒì´ ë§ì•„ í–‰ë³µí•œ í•˜ë£¨ì˜€ë‹¤ :)</p>

<hr />

<h3 id="reference">Reference</h3>

<ul>
<li>ìµœì¤‘í˜„ ì„ ì„ë‹˜!</li>
<li><a href="https://javacan.tistory.com/entry/my-interesting-java7-five-features">ìë°”7ì—ì„œ ë§ˆìŒì— ë“œëŠ” ë‹¤ì„¯ ê°€ì§€</a></li>
<li><a href="https://multifrontgarden.tistory.com/192">ì¤‘ì²© Try with resourcesëŠ” ì–´ë–»ê²Œ ë™ì‘í• ê¹Œ?</a></li>
<li><a href="https://stackoverflow.com/questions/1388602/do-i-need-to-close-both-filereader-and-bufferedreader">Do I need to close() both FileReader and BufferedReader?</a></li>
</ul>

  </div>
  <footer>
    <div class="article-footer">
      

      
      
      
      
      
      <div id="pagenavigation-next-prev">
        
        <div id="pagenavigation-next">
          <span class="pagenav-label">&lt; ì´ì „ ê¸€</span>
          <a href="http://integerous.github.io/post/dev/xml_to_java_object/">XML ë°ì´í„°ë¥¼ Java ê°ì²´ë¡œ ë³€í™˜í•˜ê¸° (feat. JAXB)</a>
        </div>
        
        
        <div id="pagenavigation-prev">
          <span class="pagenav-label">ë‹¤ìŒ ê¸€ ></span>
          <a href="http://integerous.github.io/post/dev/abstract_class/">ì¶”ìƒ(abstract) í´ë˜ìŠ¤ê°€ í•„ìš”í•œ ê¸°ë³¸ì ì¸ ì´ìœ </a>
        </div>
        
      </div>
      
    </div>

    <script src="https://utteranc.es/client.js"
    repo="integerous/blog-comments"
    issue-term="pathname"
    crossorigin="anonymous"
    async>
    </script>
  </footer>
</div>





</div>

</div>
<footer>
<div id="site-footer-wrap">
  <div id="site-footer">
    <span>Powered by <a href="https://gohugo.io/">Hugo</a>.</span>
    <span>
      
      Copyright (c) 2023, <a href="http://integerous.github.io/">ryan-han.com âŒ ğŸ¡’ jobless.blog â­•ï¸</a>
      
    </span>
  </div>
</div>
</footer>
</div>
</body>
</html>
